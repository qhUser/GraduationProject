/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2018-03-31 02:48:04 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class details_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("<title>Insert title here</title>\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"../../css/bootstrap.min.css\" ></link>\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"../../css/mycss.css\"></link>\r\n");
      out.write("<script type=\"text/javascript\" src=\"../../js/jquery-3.1.1.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"../../js/bootstrap.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"../../js/gpmall.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"../../js/jquery.cookie.js\"></script>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "head.jsp", out, false);
      out.write("\r\n");
      out.write("<div  style=\"height:50px;width:100%;\"></div>\r\n");
      out.write("<div class=\"row\" style=\"background-color:#fafafa; height:700px; border-top:3px solid #000;\">\r\n");
      out.write("<div class=\"col-md-2\" style=\"height:700px;\"></div>\r\n");
      out.write("<div class=\"col-md-10\"style=\"height:30px;color:#666;line-height:30px;\">当前位置:首页->商品详情</div>\r\n");
      out.write("<div class=\"col-md-8\" style=\"background-color:#fff;border:1px solid #ebebeb;padding:15px;\">\r\n");
      out.write("<div class=\"col-md-4\" style=\"margin-top:80px;\">\r\n");
      out.write("<img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${item.photoUrl}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\" alt=\"...\" class=\"img-thumbnail\"style=\"height:280px;\">\r\n");
      out.write(" <div class=\"l0\">\r\n");
      out.write("  <div  class=\"l1\">卖家信息</div>\r\n");
      out.write("  <div style=\"text-align: center;\">卖家:<span id=\"sellerId\"></span></div>\r\n");
      out.write("  <div style=\"margin-top:10px;text-align: center;\">综合评分:&nbsp;<span id=\"mark\"></span>分</div>\r\n");
      out.write("  <div style=\"margin-top:10px;text-align: center;\">共:&nbsp;<span id=\"count\"></span>条评论</div>\r\n");
      out.write("  <div style=\"margin-top:10px;text-align: center;\"><span id=\"checkcomment\">\r\n");
      out.write("  <button type='button' class='btn btn-link ' data-toggle='modal' data-target='#my2Modal'>查看评论</button>\r\n");
      out.write("  </span></div>\r\n");
      out.write("  </div>\r\n");
      out.write("</div>\r\n");
      out.write("  <div class=\"col-md-7\"style=\"margin:10px;font-size:20px;text-align:center;\">\r\n");
      out.write("  ");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${item.commodityname}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\r\n");
      out.write("  </div>\r\n");
      out.write("  <div class=\"col-md-7\" style=\"margin:0px 10px;color:#666;\" >\r\n");
      out.write("  商品编号：<span id=\"itemid\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${item.id}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</span>\r\n");
      out.write("  </div>\r\n");
      out.write("  <div class=\"col-md-7 l3\" >\r\n");
      out.write("  参与竞拍商品时，请认真阅读有关条款，为您带来不便敬请原谅！\r\n");
      out.write("  </div>\r\n");
      out.write("  <div class=\"l2\">\r\n");
      out.write("  <div  class=\"l1\">温馨提示</div>\r\n");
      out.write("  参与竞拍商品时，请认真阅读有关条款，为您带来不便敬请原谅！\r\n");
      out.write("  参与竞拍商品时，请认真阅读有关条款，为您带来不便敬请原谅！\r\n");
      out.write("  参与竞拍商品时，请认真阅读有关条款，为您带来不便敬请原谅！\r\n");
      out.write("  </div>\r\n");
      out.write("  <div  class=\"l4\">\r\n");
      out.write("  <div >\r\n");
      out.write("   当前价&nbsp;:&nbsp;RMB<span style=\"font-size:40px;color:red\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${item.nowprice}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</span>\r\n");
      out.write("   <span style=\"background-color: #223066;color:#fff;font-size:15px;\">加价单位:");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${item.addPrice}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</span>\r\n");
      out.write("  </div>\r\n");
      out.write("  <div>\r\n");
      out.write("  出价:<span style=\"color:red\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${item.addCount}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</span>次\r\n");
      out.write("  </div>\r\n");
      out.write("  <div style=\"height:50px;\"></div>\r\n");
      out.write("  <div style=\"background-color:#fafafa;width:100%;height:70px;line-height:70px;color:#666;font-size:20px;position:relative;\">\r\n");
      out.write("  <div style=\"float:left;\"> <span style=\"margin-top:35px;\"><img alt=\"...\" src=\"../../img/timg.jpg\"style=\"width:30px;height:30px;margin-left:10px;margin-right:10px;\"></span>剩余:</div>\r\n");
      out.write("  <input type=\"hidden\" id=\"time\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${date}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\">\r\n");
      out.write("  <div class=\"l5\" id=\"d1\"></div><div class=\"l5\"id=\"d2\"></div><div style=\"float:left;\">天</div>\r\n");
      out.write("  <div class=\"l5\"id=\"h1\"></div><div class=\"l5\"id=\"h2\"></div><div style=\"float:left;\">时</div>\r\n");
      out.write("  <div class=\"l5\"id=\"m1\"></div><div class=\"l5\"id=\"m2\"></div><div style=\"float:left;\">分</div>\r\n");
      out.write("  <div class=\"l5\"id=\"s1\"></div><div class=\"l5\"id=\"s2\"></div><div style=\"float:left;\">秒</div>\r\n");
      out.write("  <div style=\"float:left;\"></div>\r\n");
      out.write("  </div>\r\n");
      out.write("  </div>\r\n");
      out.write("  \r\n");
      out.write("  <!-- Modal -->\r\n");
      out.write("<div class=\"modal fade\" id=\"myModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\">\r\n");
      out.write("  <div class=\"modal-dialog\" role=\"document\">\r\n");
      out.write("    <div class=\"modal-content\">\r\n");
      out.write("      <div class=\"modal-header\">\r\n");
      out.write("        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\r\n");
      out.write("        <h4 class=\"modal-title\" id=\"myModalLabel\">出价竞拍</h4>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-body\">\r\n");
      out.write("        <div>本商品现在价格:<span id=\"oldPrice\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${item.nowprice}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</span>元</div>\r\n");
      out.write("        <div>最低加价不得低于:<span id=\"addPrice\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${item.addPrice}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</span>元</div>\r\n");
      out.write("        \r\n");
      out.write("        <div style=\"margin-top:20px;\">出价金额:<input type=\"text\" id=\"nowprice\" onmouseout=\"che();\">\r\n");
      out.write("        <span id=\"mess\"></span>\r\n");
      out.write("        </div>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-footer\">\r\n");
      out.write("        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">关闭</button>\r\n");
      out.write("        <button type=\"button\" class=\"btn btn-primary\" onclick=\"addprice();\">确认报价</button>\r\n");
      out.write("      </div>\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("</div>\r\n");
      out.write("  \r\n");
      out.write("  <div class=\"col-md-12\" style=\"text-align: center;\">\r\n");
      out.write("  \r\n");
      out.write("   <button type=\"button\" class=\"btn btn-primary btn-lg\" data-toggle=\"modal\" data-target=\"#myModal\" onclick=\"checkstatus();\">报价</button>\r\n");
      out.write("  </div>\r\n");
      out.write("</div>  \r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("   <!-- Modal -->\r\n");
      out.write("<div class=\"modal fade\" id=\"my2Modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\">\r\n");
      out.write("  <div class=\"modal-dialog\" role=\"document\">\r\n");
      out.write("    <div class=\"modal-content\">\r\n");
      out.write("      <div class=\"modal-header\">\r\n");
      out.write("        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\r\n");
      out.write("        <h4 class=\"modal-title\" >评价内容</h4>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-body\" id=\"modelBody\">\r\n");
      out.write("      \r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-footer\">\r\n");
      out.write("        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">关闭</button>\r\n");
      out.write("      </div>\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("</div>\r\n");
      out.write("</div>\r\n");
      out.write("</body>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("var timer1=null;\r\n");
      out.write("$(function(){  //页面加载后，加载商家信息\r\n");
      out.write("\tvar itemid=$(\"#itemid\").text();\r\n");
      out.write("\tvar sellerId\r\n");
      out.write("\t$.post(     //获得商品供应商信誉\r\n");
      out.write("\t\t\"/usercomment\",\r\n");
      out.write("\t\t{\"itemid\":itemid},\r\n");
      out.write("\t\tfunction(data){\r\n");
      out.write("\t\t\t$(\"#sellerId\").html(data.userName);\r\n");
      out.write("\t\t\t$(\"#mark\").html(data.averager);\r\n");
      out.write("\t\t\t$(\"#count\").html(data.list.length);\r\n");
      out.write("\t\t\t$(\"#my2ModalLabel\").html(data.userName);\r\n");
      out.write("\t\t\tvar html=$(\"#modelBody\").html();\r\n");
      out.write("\t\t\tfor(var i=0;i<data.list.length;i++){\r\n");
      out.write("\t\t\t\thtml+=\"<p>买家\"+eval(i+1)+\"：\"+data.list[i].comment+\"</p>\"\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\t$(\"#modelBody\").html(html);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t)\r\n");
      out.write("\t\r\n");
      out.write("\tstart();//定时器\r\n");
      out.write("})\r\n");
      out.write("   //定时器\r\n");
      out.write("  function start(){\r\n");
      out.write("\tvar s=$(\"#time\").val();\r\n");
      out.write("\tfunction fn(){\r\n");
      out.write("\t\tvar unixTimestamp = new Date(s*1) ;\r\n");
      out.write("\t\tcommonTime = unixTimestamp.toLocaleString();\r\n");
      out.write("\t\tvar array=commonTime.split(\".\");\r\n");
      out.write("\t\tvar tt=[];\r\n");
      out.write("\t\tfor(var i=0;i<array.length;i++){\r\n");
      out.write("\t\t\ttt.push(parseInt(array[i]));\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tvar ar=null;\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tar=(tt[0]+\"\").split(\"\");\t\t\r\n");
      out.write("\t\tif(ar.length==2){\t\t\t\r\n");
      out.write("\t\t\t\t$(\"#d1\").html(ar[0]);$(\"#d2\").html(ar[1]);\r\n");
      out.write("\t\t}else{\r\n");
      out.write("\t\t\t$(\"#d1\").html(\"0\");$(\"#d2\").html(ar[0]);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tar=(tt[1]+\"\").split(\"\");\t\t\r\n");
      out.write("\t\tif(ar.length==2){\t\t\t\r\n");
      out.write("\t\t\t\t$(\"#h1\").html(ar[0]);$(\"#h2\").html(ar[1]);\r\n");
      out.write("\t\t}else{\r\n");
      out.write("\t\t\t$(\"#h1\").html(\"0\");$(\"#h2\").html(ar[0]);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tar=(tt[2]+\"\").split(\"\");\t\t\r\n");
      out.write("\t\tif(ar.length==2){\t\t\t\r\n");
      out.write("\t\t\t\t$(\"#m1\").html(ar[0]);$(\"#m2\").html(ar[1]);\r\n");
      out.write("\t\t}else{\r\n");
      out.write("\t\t\t$(\"#m1\").html(\"0\");$(\"#m2\").html(ar[0]);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tar=(tt[3]+\"\").split(\"\");\t\t\r\n");
      out.write("\t\tif(ar.length==2){\t\t\t\r\n");
      out.write("\t\t\t\t$(\"#s1\").html(ar[0]);$(\"#s2\").html(ar[1]);\r\n");
      out.write("\t\t}else{\r\n");
      out.write("\t\t\t$(\"#s1\").html(\"0\");$(\"#s2\").html(ar[0]);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t\r\n");
      out.write("\t\ts-=1000;\r\n");
      out.write("\t}\r\n");
      out.write("\ttimer1=setInterval(fn,1000);\r\n");
      out.write("\t\r\n");
      out.write("}\r\n");
      out.write("Date.prototype.toLocaleString = function() {\r\n");
      out.write("    return this.getDate() + \".\" + this.getHours() + \".\" + this.getMinutes() + \".\" + this.getSeconds() ;\r\n");
      out.write("};\r\n");
      out.write("function addprice(){\r\n");
      out.write("\tvar id=$(\"#userId\").val();\r\n");
      out.write("\tvar bail=$(\"#bail\").val();\r\n");
      out.write("\t\r\n");
      out.write("\tif(id==\"\"){\r\n");
      out.write("\t\talert(\"请您先登录!\")\r\n");
      out.write("\t\t// location.href=\"http://localhost:8090\";\t\r\n");
      out.write("\t\treturn;\r\n");
      out.write("\t}\r\n");
      out.write("\tvar falg;\r\n");
      out.write("\tvar falg1;\r\n");
      out.write("    if(bail==null||bail==0){\r\n");
      out.write("    \tfalg=confirm(\"您未缴纳保证金，是否现在缴纳保证金？\")\r\n");
      out.write("    \tif(falg){\r\n");
      out.write("    \t\tfalg1=confirm(\"保证金为200元，您确定缴纳么?\")\r\n");
      out.write("    \t}else{\r\n");
      out.write("    \t\treturn;\r\n");
      out.write("    \t}\r\n");
      out.write("    \tif(falg1){\r\n");
      out.write("    \t\t$.ajax({\r\n");
      out.write("                url:\"/bail\",\r\n");
      out.write("    \t\t\tasync : false,\r\n");
      out.write("    \t\t\ttype : \"POST\",\r\n");
      out.write("    \t\t\tdata:{\"id\":id},\r\n");
      out.write("    \t\t\t success:function(data){\r\n");
      out.write("    \t\t\t\tif(data==\"OK\"){\r\n");
      out.write("    \t\t\t\t\talert(\"缴纳保证金成功\")\r\n");
      out.write("    \t\t\t\t\tlocation.href=\"/list\";\r\n");
      out.write("    \t\t\t\t\treturn;\r\n");
      out.write("    \t\t\t\t}else{\r\n");
      out.write("    \t\t\t\t\talert(\"缴纳失败，账户余额不足，请充值\")\r\n");
      out.write("    \t\t\t\t\treturn;\r\n");
      out.write("    \t\t\t\t}\r\n");
      out.write("    \t\t\t}\r\n");
      out.write("    \t\t}\r\n");
      out.write("    \t\t\t\r\n");
      out.write("    \t\t\t\t);\r\n");
      out.write("    \t}else{\r\n");
      out.write("    \t\treturn;\r\n");
      out.write("    \t}\t\t\r\n");
      out.write("    } \r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\tvar itemid=$(\"#itemid\").text();\r\n");
      out.write("\tvar userid=$(\"#userId\").val();\r\n");
      out.write("\tvar nowprice=$(\"#nowprice\").val();\r\n");
      out.write("\tvar oldprice=$(\"#oldPrice\").text();\r\n");
      out.write("\tvar addPrice=$(\"#addPrice\").text();\r\n");
      out.write("\tvar mess=$(\"#mess\");\r\n");
      out.write("\tvar falg2=((parseInt(nowprice)-parseInt(oldprice))>=parseInt(addPrice));\r\n");
      out.write("\tvar flag3=false;\r\n");
      out.write("\tif(falg2){\r\n");
      out.write("\t\t flag3=confirm(\"您确定以\"+nowprice+\"元竞拍该商品?\");\r\n");
      out.write("\t}\t\r\n");
      out.write("\tif(flag3){\r\n");
      out.write("\t\t$.post(\"/addprice\",\r\n");
      out.write("\t\t\t\t{\"itemid\":itemid,\"userid\":userid,\"nowprice\":nowprice},\r\n");
      out.write("\t\t\t\tfunction(data){\r\n");
      out.write("\t\t\t\t\talert(\"竞拍成功\");\r\n");
      out.write("\t\t\t\t\tvar itemid=$(\"#itemid\").text();\r\n");
      out.write("\t\t\t\t\tlocation.href=\"/details?id=\"+itemid;\r\n");
      out.write("\t\t\t\t});\r\n");
      out.write("\t}\t\r\n");
      out.write("}\r\n");
      out.write("function che(){  //报价是否符合规范，符合规范报价成功\r\n");
      out.write("\tvar nowprice=$(\"#nowprice\").val();\r\n");
      out.write("\tvar oldprice=$(\"#oldPrice\").text();\r\n");
      out.write("\tvar addPrice=$(\"#addPrice\").text();\r\n");
      out.write("\tvar mess=$(\"#mess\");\r\n");
      out.write("\tvar falg=((parseInt(nowprice)-parseInt(oldprice))>=parseInt(addPrice))\r\n");
      out.write("\t\r\n");
      out.write("\tif(falg){\r\n");
      out.write("\t\tmess.css(\"color\",\"green\");\r\n");
      out.write("\t\tmess.text(\"报价符合规范\");\r\n");
      out.write("\t\t\r\n");
      out.write("\t}else{\r\n");
      out.write("\t\tmess.css(\"color\",\"red\");\r\n");
      out.write("\t\tmess.text(\"报价不符合规范\");\r\n");
      out.write("\t}\r\n");
      out.write("}\r\n");
      out.write("function checkstatus(){//判定用户是否登录\r\n");
      out.write("\t\r\n");
      out.write("}\r\n");
      out.write("</script>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
